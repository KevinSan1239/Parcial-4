cors 

builder.Services.AddCors(options =>
{
    options.AddDefaultPolicy(
        policy =>
        {
            policy.WithOrigins("http://localhost:4200"
                                ).AllowAnyHeader()
                                                  .AllowAnyMethod();
        });
});


app.UseCors();

en el if se pega
